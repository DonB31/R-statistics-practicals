---
title: "Compte rendu - TP1 Initiation à R"
author: "Laroussi Labid Bachri"
date: "01/09/2025"
output:
  html_document:
    toc: yes
  pdf_document:
    toc: yes
---

# Premiers pas avec R et RMarkdown 

Ceci est un document de type R Markdown. Markdown est une mise en forme syntaxique simplifiée pour rédiger des documents HTML, PDF ou encore MsWord. Pour plus de détails sur l'utilisation de R Markdown cf. <http://rmarkdown.rstudio.com>.

Le fichier doit avoir une extension ".Rmd". Quand vous cliquez sur le bouton **Knit**, le document sera généré et inclura le contenu ainsi que la sortie produite par le code R intégré dans le document. Le code R peut être intégré comme ceci :

```{r}
-10 * log10(0.00666)
```


Il existe beaucoup de documents et tutoriels en ligne que vous pouvez explorer par vous-même. Exemples :

- Mise en forme du texte : https://rmarkdown.rstudio.com/lesson-8.html
- Bouts de code R (chunks) : https://rmarkdown.rstudio.com/lesson-3.html

# Utilisation et calcul avec du code R 

Cette partie est à compléter avec le sujet de TP en ligne : <https://moodle.utoulouse.fr/mod/page/view.php?id=21136>

## Utilisation de variables 

Les variables (ou objets) permettent de stocker des données qui peuvent être :

* une valeur simple de type numérique (`numeric`), logique (`logical`), chaîne de caractères (`character`) ou qualitative (`factor`).
* une liste (appelée `vector`).
* un tableau à 2 dimensions, les colonnes pouvant avoir des types différents (`data.frame`). Ce sont les plus utilisés en statistiques.
* un tableau à 2 dimensions, toutes les cases ayant le même type (`matrix`).
* un tableau à plus de 2 dimension (`array`).
* une combinaison des précédents (`list`). 

Une variable a un nom (défini par l'utilisateur) qui permet d'accéder à son contenu.

**Créer une variable appelée x qui stocke le résultat du calcul précédent 1 + 2 + 3.** L'affectation d'une valeur à une variable se fait avec <- ou le signe = comme suit dans la console : 

**A compléter**
```{r, include=FALSE} 
x= 1+2+3
```


## Vecteurs 

A compléter
```{r}
x = c(2,3,5,8,4,6);longueur = length(x)
```


```{r}
deuxieme_element = x[2]

acces_plusiuers_elements = x[c(2,4,1)]

valeurs_qui_se_suivent = x[2:4]

valeurs_superieures_a_4 = x[x>4]

inverse_de_x = 1/x

double_de_x = 2*x

arrondir_x_divise_par4 = round(x/4)

arrondir_x_divise_par3 = round(x/4 , 2) # on ajoute ici l'argument qui permet de choisir combien de chiffres apres la virgule
```

## Fonctions

A compléter

```{r}
summary(x)
valeur_min = min(x)
valeur_max = max(x)
mediane = median(x)
moyenne = mean(x)
variance = var(x)
ecart_type = sd(x)
```
## Lecture et écriture de fichiers contenant des données

```{r}
# Il existe plusieurs façons de selectionner manuellement un fichier 
# Sous R la fonction x = input("Entrez le chemin du fichier : ") ne marche pas. 

# **file = file.choose()** # Option 1 : on peut utiliser cette fonction pour selectionner manuellement le fichier
 
# Option 2 : # On peut aussi utiliser cette notation pour saisir directement le chemin absolue du fichier ( peut etre plus utile et adapte pour des automatisations par exemple pour éviter avoir a selectionenr manuellement à la souris le fichier)
# **fichier = readline(prompt = "Entrez le chemin complet du fichier : (astuce : la commande realpath, propre aux systèmes Unix/Linux, donne le chemin absolu d'un fichier) ")** 
# Ici, nous allons le saisir directement dans le code car lors du Knit vers HTML, on ne peut pas interagir avec RMarkdown. Cette option marche si on execute le script R dans la console. 

fichier = "/Users/bachri/Documents/M1_BBS/S7/tdb/tp_tdb/Croissance_plantes.txt"
croissance = read.table(fichier, sep="\t" , # le separateur qui va etre utilisé est la tabulation mais celui ci peut varier ("\n" , ";" , "," etc)
                        header = T , # Afficher premiere ligne = noms des colonnes
                        stringsAsFactors = T) # Interpreter les strings comme Factors ici le poids, taille ou l'origine. Les variables peuvent être qualitative ( origine_geo ) ou quantitatives ( Poids , taille). 

# On recupere les variables, ici les noms de colonnes. 
variables = names(croissance) 
croissance$poids
attach(croissance)
is_it_from_pyr = origine_geo == 'pyr'

plantes_pyr = which(origine_geo == 'pyr') # identifier quels arbres ont pour originegeo et donc qui ont origine_geo == 'pyr' -> TRUE
plantes_pyr

pyr = croissance[origine_geo == 'pyr' ,  1:2]

pyr 

# on va sauvegarder ces données dans un autre fichier .txt
write.table(pyr , "croissance_plantes_pyr.txt" , quote = F , col.names = T , row.names = F , sep="\t")
```

## Fonctions graphiques 
```{r, fig.cap="Origine geographique des plantes"}
resume_origine_geo = summary(origine_geo) # on synthetise les origines des plantes et compter combien de plantes ont tel origine.
camembert_origine = pie(resume_origine_geo
                        , main = "Origine géographique des plantes", # Titre de la figure
                        col=rainbow(12))
barplot(resume_origine_geo, main = "Origine géographique des plantes",
        col=rainbow(12))
# on est sur une variable qualitative, on ne va parler de histogramme mais de diagramme en barres
```

```{r}
# Histogrammes (variable quantitative)

hist(taille, xlim=c(40,90), xlab="Taille(cm)" , ylab = "effectif" , freq=T , main = "Histogramme de la taille des plantes" , col=rainbow(10))
# xlim=c(x,y) sert a limiter les valuers affichées sur l'histogramme.

# Boite à moustaches (variable quantitative)
boxplot(taille, main="Boxplot de la taille des plantes" , ylab="Taille" , col='salmon')

# Plusieurs boite à moustaches ( une variable quantitative en fonction des modalité d'une variable qualitative )

plot(origine_geo , taille, las=3 , main="Boxplot de la taille des plantes en fonction de l'origine geographique" , col='red' , ylab="Taille" ,xlab="Origines", notch=F)

# Les boxplots montrent que certaines origines géographiques présentent une variabilité faible (boîtes très resserrées), alors que d’autres sont plus dispersées.
#L’ajout d’de l'option (notch=TRUE) nous permet d’avoir une indication sur la comparaison des médianes.  Cela va faire apparaitre des encoches. Si les encoches ne se chevauchent pas, cela suggère des différences de médiane entre groupes. Il faut savoir que cette intérpretation est approximatice et n'équivaut pas a un test statistique.

stripchart(taille~origine_geo , las=1)

plot(taille,poids, col="red" , main = "Evolution du poids en fonction de la taille") 

# Affichage de plusieurs graphiques dans la meme fenetre
par(mfrow=c(2,2))  # 2 en lignes et 2 en colonnes par exemple 
hist(taille,xlim=c(40,90),xlab="taille (cm)",ylab="effectif",freq=T,main="histogramme de la taille des plantes",col="orange")
# xlim=c(x,y) sert a limiter les valuers affichées sur l'histogramme.
boxplot(taille,main="Boxplot de la taille des plantes",ylab="taille")
plot(taille~origine_geo,las=3)
stripchart(taille~origine_geo,las=1)

```


